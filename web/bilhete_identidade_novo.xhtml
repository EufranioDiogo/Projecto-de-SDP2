<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="content">
                <p:panel>
                    <p:panelGrid columns="2">
                        <p:outputLabel value="Nome"/>
                        <p:inputText 
                            id="nome_it" 
                            value="#{bilheteIdentidadeNovoBean.bi.nome}"
                        />
                        
                        <p:outputLabel value="Número de Identificação"/>
                        <p:inputText 
                            id="numero_it" 
                            value="#{bilheteIdentidadeNovoBean.bi.numeroIdentificacao}"
                        />

                        <p:outputLabel value="Data de Nascimento"/>
                        <p:calendar 
                            showOn="button" 
                            value="#{bilheteIdentidadeNovoBean.bi.dataNascimento}"
                            />

                        <p:outputLabel value="Local de Nascimento"/>
                        <p:panelGrid columns="2">
                            <p:selectOneMenu value="#{bilheteIdentidadeNovoBean.pkPaisNascimento}">
                                <f:selectItems
                                    value="#{localidadeCache.paisLista}"
                                    var="localidade" 
                                    itemLabel="#{localidade.nome}" 
                                    itemValue="#{localidade.pkLocalidade}"
                                    />
                                <p:ajax 
                                    listener="#{bilheteIdentidadeNovoBean.updateProvinciaNascimentoList()}"
                                    update="provincia_som"
                                    />
                            </p:selectOneMenu>

                            <p:selectOneMenu  id="provincia_som" value="#{bilheteIdentidadeNovoBean.pkProvinciaNascimento}">
                                <f:selectItems
                                    value="#{bilheteIdentidadeNovoBean.provinciaNascimentoList}"
                                    var="localidade" 
                                    itemLabel="#{localidade.nome}" 
                                    itemValue="#{localidade.pkLocalidade}"
                                    />
                                <p:ajax 
                                    listener="#{bilheteIdentidadeNovoBean.updateLocalNascimento()}"
                                    />
                            </p:selectOneMenu>

                        </p:panelGrid>

                    </p:panelGrid>

                    <p:panelGrid columns="3">
                        <p:commandButton 
                            actionListener="#{bilheteIdentidadeNovoBean.salvar()}" 
                            value="Salvar"
                            />
                        <p:commandButton 
                            actionListener="#{bilheteIdentidadeNovoBean.limpar()}" 
                            value="Limpar" 
                            update="@form"
                            />
                        <p:commandButton 
                            action="formulario_principal?faces-redirect=true"
                            value="Sair"
                            />

                    </p:panelGrid>
                </p:panel>
            </ui:define>

        </ui:composition>

    </body>
</html>
